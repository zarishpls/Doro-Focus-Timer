<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings | Doro: Focus Timer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        cherry: {
                            50: '#fdf2f4',
                            100: '#fce7ea',
                            200: '#f9d0d9',
                            300: '#f4a9b9',
                            400: '#ed7594',
                            500: '#e34a73',
                            600: '#d22e5c',
                            700: '#b01d4a',
                            800: '#931b42',
                            900: '#7c1b3c',
                            950: '#450a1e',
                        },
                        maroon: {
                            50: '#fdf2f4',
                            100: '#fce7ea',
                            200: '#f9d0d9',
                            300: '#f4a9b9',
                            400: '#ed7594',
                            500: '#e34a73',
                            600: '#d22e5c',
                            700: '#b01d4a',
                            800: '#931b42',
                            900: '#7c1b3c',
                            950: '#450a1e',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Ensure dark mode works */
        .dark {
            background-color: #111827;
            color: #f3f4f6;
        }
        .dark .bg-white {
            background-color: #1f2937 !important;
        }
        .dark .text-gray-900 {
            color: #f3f4f6 !important;
        }
        .dark .border-gray-100 {
            border-color: #374151 !important;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900 min-h-screen font-sans">
    <header class="bg-white shadow-sm">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <div class="w-8 h-8 bg-cherry-600 rounded-full flex items-center justify-center">
                    <div class="w-3 h-3 bg-white rounded-full"></div>
                </div>
                <h1 class="text-xl font-bold text-cherry-800">Doro: Focus Timer</h1>
            </div>
            <nav class="hidden md:block">
                <ul class="flex space-x-6">
                    <li><a href="index.html" class="text-gray-600 hover:text-cherry-700 transition">Home</a></li>
                    <li><a href="task-management.html" class="text-gray-600 hover:text-cherry-700 transition">Tasks</a></li>
                    <li><a href="pomodoro-timer.html" class="text-gray-600 hover:text-cherry-700 transition">Timer</a></li>
                    <li><a href="calendar-view.html" class="text-gray-600 hover:text-cherry-700 transition">Calendar</a></li>
                    <li><a href="settings.html" class="text-cherry-800 font-medium">Settings</a></li>
                </ul>
            </nav>
            <button id="mobile-menu-button" class="md:hidden text-gray-600 focus:outline-none">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
        </div>
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-gray-100">
            <ul class="px-4 py-2 space-y-2">
                <li><a href="index.html" class="block py-2 text-gray-600 hover:text-cherry-700 transition">Home</a></li>
                <li><a href="task-management.html" class="block py-2 text-gray-600 hover:text-cherry-700 transition">Tasks</a></li>
                <li><a href="pomodoro-timer.html" class="block py-2 text-gray-600 hover:text-cherry-700 transition">Timer</a></li>
                <li><a href="calendar-view.html" class="block py-2 text-gray-600 hover:text-cherry-700 transition">Calendar</a></li>
                <li><a href="settings.html" class="block py-2 text-cherry-800 font-medium">Settings</a></li>
            </ul>
        </div>
    </header>

    <main class="container mx-auto max-w-6xl px-4 py-8">
        <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
            <h2 class="text-xl font-semibold text-cherry-800 mb-6">Settings</h2>
            
            <div class="grid md:grid-cols-2 gap-8">
                <!-- Timer Settings -->
                <div>
                    <h3 class="text-lg font-medium text-gray-900 mb-4">Timer Settings</h3>
                    <div class="space-y-6">
                        <div>
                            <label for="focus-duration" class="block text-sm font-medium text-gray-700 mb-1">Focus Duration (minutes)</label>
                            <input type="number" id="focus-duration" name="focus-duration" min="1" max="60" value="25"
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cherry-500 focus:border-transparent">
                        </div>
                        <div>
                            <label for="short-break-duration" class="block text-sm font-medium text-gray-700 mb-1">Short Break Duration (minutes)</label>
                            <input type="number" id="short-break-duration" name="short-break-duration" min="1" max="30" value="5"
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cherry-500 focus:border-transparent">
                        </div>
                        <div>
                            <label for="long-break-duration" class="block text-sm font-medium text-gray-700 mb-1">Long Break Duration (minutes)</label>
                            <input type="number" id="long-break-duration" name="long-break-duration" min="1" max="60" value="15"
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cherry-500 focus:border-transparent">
                        </div>
                        <div>
                            <label for="long-break-interval" class="block text-sm font-medium text-gray-700 mb-1">Long Break Interval (sessions)</label>
                            <input type="number" id="long-break-interval" name="long-break-interval" min="1" max="10" value="4"
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cherry-500 focus:border-transparent">
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" id="auto-start-breaks" name="auto-start-breaks" class="h-4 w-4 text-cherry-600 focus:ring-cherry-500 border-gray-300 rounded">
                            <label for="auto-start-breaks" class="ml-2 block text-sm text-gray-700">Auto-start breaks</label>
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" id="auto-start-pomodoros" name="auto-start-pomodoros" class="h-4 w-4 text-cherry-600 focus:ring-cherry-500 border-gray-300 rounded">
                            <label for="auto-start-pomodoros" class="ml-2 block text-sm text-gray-700">Auto-start Pomodoros</label>
                        </div>
                    </div>
                </div>
                
                <!-- Notification Settings -->
                <div>
                    <h3 class="text-lg font-medium text-gray-900 mb-4">Notification Settings</h3>
                    <div class="space-y-6">
                        <div class="flex items-center justify-between">
                            <label for="enable-notifications" class="block text-sm font-medium text-gray-700">Enable Notifications</label>
                            <div class="relative inline-block w-10 mr-2 align-middle select-none">
                                <input type="checkbox" id="enable-notifications" name="enable-notifications" checked class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"/>
                                <label for="enable-notifications" class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"></label>
                            </div>
                        </div>
                        <div class="flex items-center justify-between">
                            <label for="enable-sounds" class="block text-sm font-medium text-gray-700">Enable Sounds</label>
                            <div class="relative inline-block w-10 mr-2 align-middle select-none">
                                <input type="checkbox" id="enable-sounds" name="enable-sounds" checked class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"/>
                                <label for="enable-sounds" class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"></label>
                            </div>
                        </div>
                        <div>
                            <label for="notification-sound" class="block text-sm font-medium text-gray-700 mb-1">Notification Sound</label>
                            <select id="notification-sound" name="notification-sound" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cherry-500 focus:border-transparent">
                                <option value="bell">Bell</option>
                                <option value="digital">Digital</option>
                                <option value="chime">Chime</option>
                                <option value="marimba">Marimba</option>
                                <option value="xylophone">Xylophone</option>
                            </select>
                        </div>
                        <div>
                            <label for="volume" class="block text-sm font-medium text-gray-700 mb-1">Volume</label>
                            <input type="range" id="volume" name="volume" min="0" max="100" value="80" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" id="notify-before-end" name="notify-before-end" class="h-4 w-4 text-cherry-600 focus:ring-cherry-500 border-gray-300 rounded">
                            <label for="notify-before-end" class="ml-2 block text-sm text-gray-700">Notify 1 minute before session ends</label>
                        </div>
                    </div>
                </div>
                
                <!-- Data Settings -->
                <div>
                    <h3 class="text-lg font-medium text-gray-900 mb-4">Data Settings</h3>
                    <div class="space-y-6">
                        <div class="flex items-center justify-between">
                            <label for="save-history" class="block text-sm font-medium text-gray-700">Save Session History</label>
                            <div class="relative inline-block w-10 mr-2 align-middle select-none">
                                <input type="checkbox" id="save-history" name="save-history" checked class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"/>
                                <label for="save-history" class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"></label>
                            </div>
                        </div>
                        <div>
                            <label for="history-retention" class="block text-sm font-medium text-gray-700 mb-1">History Retention</label>
                            <select id="history-retention" name="history-retention" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cherry-500 focus:border-transparent">
                                <option value="7">7 days</option>
                                <option value="30" selected>30 days</option>
                                <option value="90">90 days</option>
                                <option value="365">1 year</option>
                                <option value="0">Forever</option>
                            </select>
                        </div>
                        <div class="pt-4">
                            <button id="export-data" class="bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-lg transition">
                                Export Data
                            </button>
                            <button id="clear-data" class="ml-2 bg-red-50 hover:bg-red-100 text-red-600 font-medium py-2 px-4 rounded-lg transition">
                                Clear All Data
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="mt-8 pt-6 border-t border-gray-200 flex justify-end">
                <button id="reset-settings" class="bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-lg mr-2">
                    Reset to Defaults
                </button>
                <button id="save-settings" class="bg-cherry-600 hover:bg-cherry-700 text-white font-medium py-2 px-6 rounded-lg transition shadow-sm hover:shadow-md">
                    Save Settings
                </button>
            </div>
        </div>
    </main>

    <footer class="bg-gray-100 border-t border-gray-200 py-8 px-4 mt-auto">
        <div class="container mx-auto max-w-6xl">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center space-x-2 mb-4 md:mb-0">
                    <div class="w-6 h-6 bg-cherry-600 rounded-full flex items-center justify-center">
                        <div class="w-2 h-2 bg-white rounded-full"></div>
                    </div>
                    <span class="text-sm font-medium text-gray-600">Doro: Focus Timer</span>
                </div>
                <nav class="mb-4 md:mb-0">
                    <ul class="flex space-x-6 text-sm">
                        <li><a href="index.html" class="text-gray-600 hover:text-cherry-700 transition">Home</a></li>
                        <li><a href="task-management.html" class="text-gray-600 hover:text-cherry-700 transition">Tasks</a></li>
                        <li><a href="pomodoro-timer.html" class="text-gray-600 hover:text-cherry-700 transition">Timer</a></li>
                        <li><a href="calendar-view.html" class="text-gray-600 hover:text-cherry-700 transition">Calendar</a></li>
                        <li><a href="settings.html" class="text-gray-600 hover:text-cherry-700 transition">Settings</a></li>
                    </ul>
                </nav>
                <div class="text-sm text-gray-500">
                    &copy; 2025 Doro: Focus Timer. All rights reserved.
                </div>
            </div>
        </div>
    </footer>

    <script>
    // Mobile menu toggle
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const mobileMenuLinks = document.querySelectorAll('#mobile-menu a');

    mobileMenuButton.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
    });

    mobileMenuLinks.forEach(link => {
        link.addEventListener('click', () => {
            mobileMenu.classList.add('hidden');
        });
    });

    // Toggle switch styling
    document.querySelectorAll('.toggle-checkbox').forEach(toggle => {
        toggle.addEventListener('change', function() {
            if (this.checked) {
                this.nextElementSibling.classList.remove('bg-gray-300');
                this.nextElementSibling.classList.add('bg-cherry-500');
            } else {
                this.nextElementSibling.classList.remove('bg-cherry-500');
                this.nextElementSibling.classList.add('bg-gray-300');
            }
        });

        // Initialize toggle state
        if (toggle.checked) {
            toggle.nextElementSibling.classList.remove('bg-gray-300');
            toggle.nextElementSibling.classList.add('bg-cherry-500');
        }
    });

    // Load saved settings
    document.addEventListener('DOMContentLoaded', () => {
        const settings = JSON.parse(localStorage.getItem('pomodoro-settings')) || {};
        
        // Timer Settings
        document.getElementById('focus-duration').value = settings.focusDuration || 25;
        document.getElementById('short-break-duration').value = settings.shortBreakDuration || 5;
        document.getElementById('long-break-duration').value = settings.longBreakDuration || 15;
        document.getElementById('long-break-interval').value = settings.longBreakInterval || 4;
        document.getElementById('auto-start-breaks').checked = settings.autoStartBreaks || false;
        document.getElementById('auto-start-pomodoros').checked = settings.autoStartPomodoros || false;
        
        // Notification Settings
        document.getElementById('enable-notifications').checked = settings.enableNotifications !== false;
        document.getElementById('enable-sounds').checked = settings.enableSounds !== false;
        document.getElementById('notification-sound').value = settings.notificationSound || 'bell';
        document.getElementById('volume').value = settings.volume || 80;
        document.getElementById('notify-before-end').checked = settings.notifyBeforeEnd || false;
        
        // Data Settings
        document.getElementById('save-history').checked = settings.saveHistory !== false;
        document.getElementById('history-retention').value = settings.historyRetention || '30';
    });

    // Save settings
    document.getElementById('save-settings').addEventListener('click', function() {
        const settings = {
            // Timer Settings
            focusDuration: parseInt(document.getElementById('focus-duration').value),
            shortBreakDuration: parseInt(document.getElementById('short-break-duration').value),
            longBreakDuration: parseInt(document.getElementById('long-break-duration').value),
            longBreakInterval: parseInt(document.getElementById('long-break-interval').value),
            autoStartBreaks: document.getElementById('auto-start-breaks').checked,
            autoStartPomodoros: document.getElementById('auto-start-pomodoros').checked,
            
            // Notification Settings
            enableNotifications: document.getElementById('enable-notifications').checked,
            enableSounds: document.getElementById('enable-sounds').checked,
            notificationSound: document.getElementById('notification-sound').value,
            volume: parseInt(document.getElementById('volume').value),
            notifyBeforeEnd: document.getElementById('notify-before-end').checked,
            
            // Data Settings
            saveHistory: document.getElementById('save-history').checked,
            historyRetention: document.getElementById('history-retention').value
        };

        localStorage.setItem('pomodoro-settings', JSON.stringify(settings));
        
        // Show success message
        const button = this;
        const originalText = button.textContent;
        button.textContent = 'Settings Saved!';
        button.classList.remove('bg-cherry-600', 'hover:bg-cherry-700');
        button.classList.add('bg-green-600', 'hover:bg-green-700');
        
        setTimeout(() => {
            button.textContent = originalText;
            button.classList.remove('bg-green-600', 'hover:bg-green-700');
            button.classList.add('bg-cherry-600', 'hover:bg-cherry-700');
        }, 2000);
    });

    // Clear data confirmation
    document.getElementById('clear-data').addEventListener('click', function() {
        if (confirm('Are you sure you want to clear all your data? This action cannot be undone.')) {
            localStorage.clear();
            alert('All data has been cleared.');
            location.reload();
        }
    });

    // Reset to defaults
    document.getElementById('reset-settings').addEventListener('click', function() {
        if (confirm('Reset all settings to default values?')) {
            localStorage.removeItem('pomodoro-settings');
            location.reload();
        }
    });

    // Export data
    document.getElementById('export-data').addEventListener('click', function() {
        const data = {
            tasks: JSON.parse(localStorage.getItem('pomodoro-tasks')) || [],
            settings: JSON.parse(localStorage.getItem('pomodoro-settings')) || {},
            sessions: JSON.parse(localStorage.getItem('pomodoro-sessions')) || []
        };
        
        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `pomodoro-plus-backup-${new Date().toISOString().split('T')[0]}.json`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    });
    </script>
</body>
</html>